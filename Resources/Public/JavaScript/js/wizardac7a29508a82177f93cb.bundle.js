(self.webpackChunkqsa=self.webpackChunkqsa||[]).push([[32,814],{714:function(e,t,a){"use strict";function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}a.r(t);var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t,a;return t=e,(a=[{key:"init",value:function(){this.triggerInput(),this.fileUpload(),this.countKeywords(),this.removeFile(),this.addFile()}},{key:"triggerInput",value:function(){document.querySelectorAll(".qsa_input-group__input-text").forEach((function(e){e.addEventListener("input",(function(e){e.target.setAttribute("data-empty",!e.currentTarget.value)}))}))}},{key:"fileUpload",value:function(){var e=this,t=document.querySelectorAll('.qsa_input-group-file__label span[role="button"]'),a=document.querySelectorAll('.qsa_input-group-file__input[type="file"]');t.forEach((function(e){e.addEventListener("keypress keyup",(function(t){32!==t.which&&13!==t.which||(t.preventDefault(),e.click())}))})),a.forEach((function(t){t.addEventListener("change",(function(a){var n=a.target.value.split("\\").pop();t.nextElementSibling.value=n,t.nextElementSibling.setAttribute("placeholder",n),t.parentElement.classList.add("qsa_input-group-file--filled"),e.removeFile()}))}))}},{key:"countKeywords",value:function(){document.querySelectorAll(".qsa_input-group__keywords").forEach((function(e){var t=e.querySelector("input"),a=e.querySelector(".qsa_input-group__count");t.addEventListener("input",(function(e){var t=e.currentTarget,n=t.value,r=t.dataset.maxlength,i=n.split(",").filter((function(e){return e}));if(i.length>r){var s=n.lastIndexOf(",");return t.value=n.substring(0,s),!1}a.innerHTML=i.length}))}))}},{key:"removeFile",value:function(){var e=this;document.querySelectorAll(".qsa_input-group-file-remove").forEach((function(t){t.addEventListener("click",(function(t){t.stopImmediatePropagation(),console.log("click");var a=t.target.parentElement,n=a.parentElement.parentElement,r=n.querySelector(".qsa_wizard__wrapper-form-element-add");console.log(a),a.parentElement.remove(),0===n.querySelectorAll(".qsa_input-group-file").length&&r.classList.remove("d-none"),r.addEventListener("click",(function(t){t.stopPropagation(),r.classList.add("d-none"),e.addFileMarkup(n)}))}))}))}},{key:"addFile",value:function(){var e=this;document.querySelectorAll(".qsa_input-group-file-add").forEach((function(t){var a=t.parentElement.parentElement.parentElement;t.addEventListener("click",(function(t){e.addFileMarkup(a)}))}))}},{key:"addFileMarkup",value:function(e){var t=Math.random();e.insertAdjacentHTML("beforeend",'<div class="qsa_input-group" data-input="file">\n    <div class="qsa_input-group-file" data-showinsummary="true">\n        <label class="qsa_input-group-file__label" for="fileupload-'.concat(t,'" id="buttonlabel-').concat(t,'">\n            <span role="button" aria-controls="filename" tabindex="0">\n                <svg class="qsa_icon icon--upload icon--base" role="img" width="20" height="20" aria-hidden="true">\n                    <title class="sr-only">Icon publish</title>\n                    <desc class="sr-only">Icon um Datei hochzuladen</desc>\n                    <use xlink:href="./assets/icons/icon.min.svg#icon-upload"></use>\n                </svg>\n            </span>\n        </label>\n        <span class="qsa_input-group-file-size">PDF | <span>23.8 MB</span></span>\n        <svg class="qsa_icon icon--pdf-file icon--base" role="img" width="20" height="20" aria-hidden="true">\n            <title class="sr-only">Icon pdf-file</title>\n            <desc class="sr-only"></desc>\n            <use xlink:href="./assets/icons/icon.min.svg#icon-pdf-file"></use>\n        </svg>\n        <button class="qsa_input-group-file-remove btn-outline__without">\n            <span class="sr-only">Ausgewählte PDF löschen</span>\n            <svg class="qsa_icon icon--delete-bin icon--base" role="img" width="20" height="20" aria-hidden="true">\n                <title class="sr-only">Icon delete-bin</title>\n                <desc class="sr-only"></desc>\n                <use xlink:href="./assets/icons/icon.min.svg#icon-delete-bin"></use>\n            </svg>\n        </button>\n            <button class="qsa_input-group-file-add btn-outline__without">\n                <span class="sr-only">Eine Weitere Datei hinzufügen</span>\n                <svg class="qsa_icon icon--add-btn icon--base" role="img" width="20" height="20" aria-hidden="true">\n                    <title class="sr-only">Icon add-btn</title>\n                    <desc class="sr-only"></desc>\n                    <use xlink:href="./assets/icons/icon.min.svg#icon-add-btn"></use>\n                </svg>\n            </button>\n                <input class="qsa_input-group-file__input" type="file" accept="application/pdf" id="fileupload-').concat(t,'">\n                <input class="qsa_input-group-file__text-input" type="text" id="').concat(t,'--filename" autocomplete="off" readonly="" placeholder="Eigene Datei hochladen">\n                <label class="qsa_input-group-file__text-label" for="').concat(t,'--filename">\n                    Eigene Datei hochladen\n        </label>\n    </div>\n</div>')),this.removeFile(),this.fileUpload(),this.addFile()}}])&&n(t.prototype,a),e}();t.default=new r},22:function(e,t,a){"use strict";a.r(t);var n=a(628);function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t,a;return t=e,(a=[{key:"init",value:function(){this.dragToScroll(),this.switchTabs()}},{key:"dragToScroll",value:function(){document.querySelectorAll(".qsa_progress-bar").forEach((function(e){e.style.cursor="grab";var t={top:0,left:0,x:0,y:0},a=function(a){var n=a.clientX-t.x,r=a.clientY-t.y;document.querySelector(".qsa_progress-bar .qsa_btn--round").style.display="none",e.scrollTop=t.top-r,e.scrollLeft=t.left-n},n=function t(){e.style.cursor="grab",e.style.removeProperty("user-select"),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",t)};e.addEventListener("mousedown",(function(r){e.style.userSelect="none",t={left:e.scrollLeft,top:e.scrollTop,x:r.clientX,y:r.clientY},document.addEventListener("mousemove",a),document.addEventListener("mouseup",n)}))}))}},{key:"switchTabs",value:function(){var e=document.querySelectorAll(".qsa_progress-bar__container-item"),t=document.querySelectorAll(".qsa_wizard__wrapper-content"),a=document.querySelector(".qsa_wizard"),r=document.querySelectorAll(".qsa_wizard__wrapper-button-next"),i=document.querySelector(".qsa_progress-bar__container-list .qsa_progress-bar__container-item:last-child"),s=document.querySelectorAll(".qsa_wizard__wrapper-form-element-edit");i.addEventListener("click",(function(){n.default.generateSummary()})),s.forEach((function(n){n.addEventListener("click",(function(n){n.stopImmediatePropagation();var r=n.target.dataset.step,i=Array.from(e).find((function(e){return e.dataset.id===r}));e.forEach((function(e){e.classList.contains("active")&&e.classList.remove("active")})),t.forEach((function(e){e.classList.add("d-none")})),i.classList.add("active"),a.querySelector("#"+r).classList.remove("d-none")}))})),e.forEach((function(r){r.addEventListener("click",(function(r){r.stopImmediatePropagation();var i=r.target.dataset.id;e.forEach((function(e){e.classList.contains("active")&&e.classList.remove("active")})),r.target.classList.contains("active")||r.target.classList.add("active"),t.forEach((function(e){e.classList.add("d-none")})),a.querySelector("#"+i).classList.remove("d-none"),n.default.generateSummary()}))})),r.forEach((function(a){a.addEventListener("click",(function(a){a.stopImmediatePropagation();var r=a.target.parentElement,i=r.nextElementSibling.getAttribute("id"),s=Array.from(e).find((function(e){return e.dataset.id===i}));e.forEach((function(e){e.classList.contains("active")&&e.classList.remove("active")})),t.forEach((function(e){e.classList.add("d-none")})),s.classList.add("active"),r.nextElementSibling.classList.remove("d-none"),n.default.generateSummary()}))}))}},{key:"checkOverflow",value:function(){var e=document.querySelector(".qsa_progress-bar__container-list"),t=document.querySelector(".qsa_progress-bar__container"),a=document.querySelector(".qsa_progress-bar .qsa_btn--round");e.clientWidth>t.clientWidth&&(a.style.display="block")}}])&&r(t.prototype,a),e}();t.default=new i},628:function(e,t,a){"use strict";a.r(t),a(714);var n=a(22);function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init(),this.errorModalShown=!1}var t,a;return t=e,(a=[{key:"init",value:function(){this.openWizard(),this.showHintText(),this.showSteps(),this.copyForm(),this.removeForm()}},{key:"openWizard",value:function(){var e=document.querySelector("#openWizard"),t=document.querySelector("#qucosaWizard"),a=document.querySelector("body"),n=$("#wizardCloseWarning");document.querySelectorAll(".qsa_wizard__header-btn").forEach((function(e){e.addEventListener("click",(function(){n.modal("show"),document.querySelector("#closeWizard").addEventListener("click",(function(){t.classList.toggle("qsa_wizard--open"),a.classList.toggle("no-scroll")}))}))})),e.addEventListener("click",(function(){t.classList.toggle("qsa_wizard--open"),a.classList.toggle("no-scroll")})),"#qucosaWizard"===window.location.hash&&(t.classList.toggle("qsa_wizard--open"),a.classList.toggle("no-scroll"))}},{key:"showHintText",value:function(){var e=document.querySelectorAll(".qsa_wizard__wrapper-list-item"),t=document.querySelectorAll(".qsa_wizard__wrapper-text-element"),a=document.querySelector(".qsa_wizard__wrapper-text-default");window.addEventListener("mouseover",(function(e){"qsa_wizard__wrapper-list-item-link"!==e.target.getAttribute("class")&&a.classList.contains("qsa_wizard__wrapper-text-default--hidden")&&a.classList.remove("qsa_wizard__wrapper-text-default--hidden")})),e.forEach((function(e){e.addEventListener("mouseover",(function(e){var n=e.target.getAttribute("id"),r=Array.from(t).find((function(e){return e.dataset.id===n}));a.classList.add("qsa_wizard__wrapper-text-default--hidden"),r.classList.add("qsa_wizard__wrapper-text-element--visible")}))})),e.forEach((function(e){e.addEventListener("mouseout",(function(e){var a=e.target.getAttribute("id");Array.from(t).find((function(e){return e.dataset.id===a})).classList.remove("qsa_wizard__wrapper-text-element--visible")}))}))}},{key:"showSteps",value:function(){var e=document.querySelectorAll(".qsa_wizard__wrapper-list-item-link"),t=document.querySelector(".qsa_wizard__wrapper-first"),a=document.querySelector(".qsa_wizard__wrapper-steps"),r=document.querySelector(".qsa_progress-bar__container-list");e.forEach((function(e){e.addEventListener("click",(function(e){t.classList.add("d-none"),a.classList.remove("d-none"),a.querySelector("#tab-1").classList.remove("d-none"),r.firstElementChild.classList.add("active"),n.default.checkOverflow()}))}))}},{key:"generateSummary",value:function(){var e=this,t=document.querySelector(".qsa_wizard__wrapper-steps .qsa_wizard__wrapper-content:last-child"),a=t.querySelector(".qsa_wizard__wrapper-form"),r=document.querySelector(".qsa_progress-bar__container-item.active"),i=[],s=this;a.innerHTML="",s.getPreviousSiblings(r).forEach((function(t,a,n){if(a<n.length){var r=t.querySelector(".qsa_progress-bar__container-item-title").textContent,s=t.dataset.id,o=document.querySelector("#"+s),l=o.querySelectorAll(".qsa_wizard__wrapper-form-element"),c=o.querySelectorAll("input:required"),u=o.querySelectorAll(".qsa_select__native:required"),d=o.querySelectorAll(".qsa_text-area__field:required"),p={};c.forEach((function(t){t.value?t.classList.contains("qsa_input-group__input--not-filled")&&t.classList.remove("qsa_input-group__input--not-filled"):t.classList.contains("qsa_input-group__input--not-filled")||(t.classList.add("qsa_input-group__input--not-filled"),e.errorModalShown||($("#wizardErrorModal").modal("show"),e.errorModalShown=!0))})),u.forEach((function(e){var t=e.nextElementSibling.querySelector(".qsa_select__custom-trigger");e.value?t.classList.contains("qsa_select__custom-trigger--not-filled")&&e.nextElementSibling.querySelector(".qsa_select__custom-trigger").classList.remove("qsa_select__custom-trigger--not-filled"):t.classList.contains("qsa_select__custom-trigger--not-filled")||e.nextElementSibling.querySelector(".qsa_select__custom-trigger").classList.add("qsa_select__custom-trigger--not-filled")})),d.forEach((function(e){e.value?e.classList.contains("qsa_text-area__field--not-filled")&&e.classList.remove("qsa_text-area__field--not-filled"):e.classList.contains("qsa_text-area__field--not-filled")||e.classList.add("qsa_text-area__field--not-filled")})),p.title=r,p.id=s,p.validValues=[],p.inputs=[],l.forEach((function(e){var t=e.querySelectorAll('div[data-input="text"]'),a=e.querySelectorAll(".qsa_select__wrapper"),n=e.querySelectorAll(".qsa_field__datepicker-wrap"),r=e.querySelectorAll(".qsa_input-group-file"),i=e.querySelectorAll(".qsa_text-area"),s=[];t.forEach((function(e){var t={};t.name=e.querySelector(".qsa_input-group__label").textContent,t.value=e.querySelector(".qsa_input-group__input-text").value,t.type="text",t.required=e.querySelector(".qsa_input-group__input-text").hasAttribute("required"),t.showInSummary=e.dataset.showinsummary,t.pattern=e.querySelector(".qsa_input-group__input-text").getAttribute("pattern"),t.validPattern=!0,t.pattern&&(t.value.match(t.pattern)?(t.validPattern=!0,e.querySelector(".qsa_input-group__error--number").classList.contains("d-none")||e.querySelector(".qsa_input-group__error--number").classList.add("d-none"),e.querySelector(".qsa_input-group__input-text").classList.contains("qsa_input-group__input--not-filled")&&e.querySelector(".qsa_input-group__input-text").classList.remove("qsa_input-group__input--not-filled")):(t.validPattern=!1,e.querySelector(".qsa_input-group__input-text").classList.contains("qsa_input-group__input--not-filled")||e.querySelector(".qsa_input-group__input-text").classList.add("qsa_input-group__input--not-filled"),"^[0-9]*$"===t.pattern&&e.querySelector(".qsa_input-group__error--number").classList.contains("d-none")&&e.querySelector(".qsa_input-group__error--number").classList.remove("d-none"))),!t.value&&t.required||!t.validPattern?p.validValues.push("notValid"):p.validValues.push("valid"),s.push(t)})),a.forEach((function(e){var t=e.querySelector(".qsa_select__native"),a={};a.name=e.querySelector(".qsa_select__label").textContent,a.value=t.options[t.selectedIndex].text,a.type="select",a.required=t.hasAttribute("required"),a.showInSummary=e.dataset.showinsummary,!a.value&&a.required?p.validValues.push("notValid"):p.validValues.push("valid"),s.push(a)})),n.forEach((function(e){var t={};t.name=e.querySelector("label").textContent,t.value=e.querySelector("input").value,t.type="date",t.required=e.querySelector("input").hasAttribute("required"),t.showInSummary=e.dataset.showinsummary,!t.value&&t.required?p.validValues.push("notValid"):p.validValues.push("valid"),s.push(t)})),r.forEach((function(e){var t={};t.value=e.querySelector(".qsa_input-group-file__text-input").value,t.size=e.querySelector(".qsa_input-group-file-size span").textContent,t.type="file",t.required=e.querySelector(".qsa_input-group-file__text-input").hasAttribute("required"),t.showInSummary=e.dataset.showinsummary,!t.value&&t.required?p.validValues.push("notValid"):p.validValues.push("valid"),s.push(t)})),i.forEach((function(e){var t={};t.value=e.querySelector(".qsa_text-area__field").value,t.type="textarea",t.required=e.querySelector(".qsa_text-area__field").hasAttribute("required"),t.showInSummary=e.dataset.showinsummary,!t.value&&t.required?p.validValues.push("notValid"):p.validValues.push("valid"),s.push(t)})),p.inputs.push(s),p.isValid=!p.validValues.includes("notValid")})),i.push(p),i.reverse()}})),i.forEach((function(e){var a=document.createElement("div");a.classList.add("qsa_wizard__wrapper-form-element"),a.innerHTML='<div class="qsa_wizard__wrapper-form-element-header qsa_wizard__wrapper-form-element-header-edit"><h5>'.concat(e.title,'</h5>\n                <button type="button" data-step="').concat(e.id,'" class="btn qsa_wizard__wrapper-form-element-edit qsa_btn--transparent" aria-label="Bearbeiten">\n                    <span data-step="').concat(e.id,'" class="qsa_wizard__wrapper-form-element-edit--invalid d-none">Unvollständig! Angaben bitte überarbeiten</span>\n                    <span data-step="').concat(e.id,'" class="qsa_wizard__wrapper-form-element-edit--valid d-none">Bearbeiten</span>\n                    <svg data-step="').concat(e.id,'" class="qsa_icon icon--edit icon--base" role="img" width="18" height="18" aria-hidden="true">\n                        <title class="sr-only">Icon edit</title>\n                        <desc class="sr-only">Ein Stift</desc>\n                        <use xlink:href="../../icon/icon.min.svg#icon-edit"></use>\n                    </svg>\n                </button>\n            </div>'),n.default.switchTabs(),e.inputs.forEach((function(e){var t=!1,n=document.createElement("div");n.classList.add("qsa_wizard__wrapper-form-element"),e.forEach((function(e){if(e.value&&e.showInSummary)if(t=!0,"file"===e.type){var a=document.createElement("div"),r=Math.random();a.classList.add("qsa_wizard__summary-file"),a.insertAdjacentHTML("beforeend",'<div class="qsa_input-group-file qsa_input-group-file--filled">\n                            <span class="qsa_input-group-file-size">PDF | <span>'.concat(e.size,'</span></span>\n                                <svg class="qsa_icon icon--pdf-file icon--pdf-file--absolute icon--base" role="img" width="20" height="20" aria-hidden="true">\n                                    <title class="sr-only">Icon pdf-file</title>\n                                    <desc class="sr-only"></desc>\n                                    <use xlink:href="./assets/icons/icon.min.svg#icon-pdf-file"></use>\n                                </svg>\n                            <input class="qsa_input-group-file__text-input" type="text" id="').concat(r,'--filename" autocomplete="off" readonly="" placeholder="').concat(e.value,'">\n                            <label class="qsa_input-group-file__text-label" for="').concat(r,'--filename">\n                                Eigene Datei hochladen\n                            </label>\n                        </div>')),n.appendChild(a)}else{var i=document.createElement("p");i.classList.add("qsa_wizard__summary-title"),i.innerHTML=e.name?e.name:"";var s=document.createElement("p");s.classList.add("qsa_wizard__summary-value"),"textarea"===e.type&&s.classList.add("qsa_wizard__summary-value--thin"),s.innerHTML=e.value?e.value:"",n.appendChild(i),n.appendChild(s)}})),t&&a.appendChild(n)})),t.querySelector(".qsa_wizard__wrapper-form").appendChild(a),s.checkValidity(e)}))}},{key:"checkValidity",value:function(e){var t=document.querySelector("#"+e.id),a=document.querySelector('.qsa_progress-bar__container-item[data-id="'.concat(e.id,'"]')),n=document.querySelector('.qsa_wizard__wrapper-form-element-edit--invalid[data-step="'.concat(e.id,'"]')),r=document.querySelector('.qsa_wizard__wrapper-form-element-edit--valid[data-step="'.concat(e.id,'"]'));e.isValid?t.querySelector(".qsa_content-area__warning")&&(t.querySelector(".qsa_content-area__warning").classList.add("qsa_content-area__warning--hidden"),a.classList.add("qsa_progress-bar__container-item--valid"),a.classList.contains("qsa_progress-bar__container-item--invalid")&&a.classList.remove("qsa_progress-bar__container-item--invalid"),n.classList.contains("d-none")||(n.classList.add("d-none"),n.classList.remove("active")),r.classList.contains("d-none")&&(r.classList.remove("d-none"),r.classList.add("active"))):t.querySelector(".qsa_content-area__warning")&&(t.querySelector(".qsa_content-area__warning").classList.remove("qsa_content-area__warning--hidden"),a.classList.add("qsa_progress-bar__container-item--invalid"),a.classList.contains("qsa_progress-bar__container-item--valid")&&a.classList.remove("qsa_progress-bar__container-item--valid"),n.classList.contains("d-none")&&(n.classList.remove("d-none"),n.classList.add("active")),r.classList.contains("d-none")||(r.classList.add("d-none"),r.classList.remove("active"))),0===document.querySelectorAll(".qsa_progress-bar__container-item--invalid").length&&(document.querySelector(".qsa_wizard__wrapper-button-send").classList.remove("qsa_wizard__wrapper-button--disabled"),document.querySelector(".qsa_wizard__wrapper-button-send").addEventListener("click",(function(){document.querySelector(".qsa_wizard__wrapper-steps").classList.add("d-none"),document.querySelector(".qsa_wizard__wrapper-last").classList.remove("d-none"),document.querySelector(".qsa_wizard__wrapper-last .qsa_wizard__wrapper-content").classList.remove("d-none"),document.querySelector(".qsa_wizard__wrapper-last #reloadWizard").addEventListener("click",(function(){window.location.hash="#",window.location.reload()}))})))}},{key:"copyForm",value:function(){var e=document.querySelectorAll('button[name="add-group"]'),t=this;e.forEach((function(e){e.addEventListener("click",(function(e){var a=e.target.parentNode.parentNode.previousElementSibling,n=e.target.parentNode.parentNode.parentNode,r=e.target.parentNode.parentNode,i=a.cloneNode(!0);n.insertBefore(i,r),i.classList.add("qsa_wizard__wrapper-content-block--cloned"),t.removeForm()}))}))}},{key:"removeForm",value:function(){document.querySelectorAll('button[name="remove-group"]').forEach((function(e){e.addEventListener("click",(function(e){e.target.closest(".qsa_wizard__wrapper-content-block").remove()}))}))}},{key:"getPreviousSiblings",value:function(e,t){for(var a=[];e=e.previousSibling;)3!==e.nodeType&&(t&&!t(e)||a.push(e));return a}}])&&r(t.prototype,a),e}();t.default=new i}}]);